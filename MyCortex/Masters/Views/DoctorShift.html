<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
<script>
    $(function () {
        var dtToday = new Date();

        var month = dtToday.getMonth() + 1;
        var day = dtToday.getDate();
        var year = dtToday.getFullYear();
        if (month < 10)
            month = '0' + month.toString();
        if (day < 10)
            day = '0' + day.toString();

        var maxDate = year + '-' + month + '-' + day;
        //alert(maxDate);
        $('#ToDate').attr('min', maxDate);
        $('#FromDate').attr('min', maxDate);
    });
</script>


<ul class="secondaryMenu">
    <li><a href="Home/Index#/AppointmentSlot">Appointment Slot</a></li>
    <li><a href="Home/Index#/SlotTiming">Shift Timing</a></li>
    <li><a href="Home/Index#/DoctorShift" class="secondaryMenuActive" data-menu="Appointment Setting">Doctor Shift</a></li>
    <li><a href="Home/Index#/DoctorHoliday">Doctor Holiday</a></li>
    <li><a href="Home/Index#/MyAppointmentSetting">Organization Settings</a></li>
    <!--<li><a href="Home/Index#/ParameterSettings">Standard Parameter</a></li>
    <li><a href="Home/Index#/ChatSetting/2">Chat Settings</a></li>
    <li> <a href="Home/Index#/Password_Policy">Password Policy</a></li>
    <li><a href="Home/Index#/ResetPassword">Reset Password</a></li>
    <li><a href="Home/Index#/MasterEmailConfigurationList">Email setup</a></li>
    <li><a href="Home/Index#/MasterAlertConfigurationList">Alerts</a></li>-->
    <!--<li><a href="Home/Index#/WebConfiguration">Configuration</a></li>
    <li><a href="Home/Index#/LanguageSettings">Language Settings</a></li>-->
</ul>


<h1 class="page-title">Doctor Shift</h1>
<div ng-init="DoctorShiftListGo()">

    <div class="lds-ripple" id="chatLoaderPV" style="display: none;z-index:10000">
        <div></div>
        <div></div>
    </div>
    <div class="panel panel-default" id="DMid">
        <form role="form" class="panel-body">
            <div class="col-sm-4">
                <div class="inputGroups">
                    <label>Search</label>
                    <div class="modernSearch">
                        <input type="text" ng-model="searchquery" ng-change="filterDoctorShiftList()" placeholder=""
                               style="width: 200px" />
                        <i class="fa fa-search"></i>
                    </div>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="inputGroups">
                    <label for="Active">Active</label>
                    <input toggle-checkbox ng-model="IsActive" type="checkbox" ng-change="DoctorShiftListGo();"
                           title="Active / All">
                </div>
            </div>
            <div class="col-sm-4">
                <div class="inputGroups">
                    <a href="javascript:" ng-click="DoctorShiftClear();AddSlot();" class="theme-btn-1 pull-right mt-15"
                       title="Click to Add New Drug DB">Add New</a>
                </div>
            </div>

        </form>
    </div>

    <table st-table="emptydata" style="width: 100%" st-safe-src="rowCollectionFilter" st-search="query"
           class="table themeTable">
        <thead>
            <tr style="text-align: center">
                <th st-ratio="5">#</th>
                <th st-ratio="10" st-sort="Generic_Name">Doctor</th>
                <th st-ratio="8" st-sort="WeekDayName">Week Day Name</th>
                <th st-ratio="8" st-sort="ShiftName">Shift Name</th>
                <!-- <th st-ratio="8" st-sort="StrengthName">Sun</th>
                    <th st-ratio="8" st-sort="Dosage_FromName">Mon</th>
                    <th st-ratio="8" st-sort="StrengthName">Tue</th>
                    <th st-ratio="8" st-sort="Dosage_FromName">Wed</th>
                    <th st-ratio="8" st-sort="StrengthName">Thu</th>
                    <th st-ratio="8" st-sort="Dosage_FromName">Fri</th>
                    <th st-ratio="8" st-sort="Dosage_FromName">Sat</th>-->
                <th st-ratio="8" st-sort="FromDate">From Date</th>
                <th st-ratio="8" st-sort="ToDate">To Date</th>
                <th st-ratio="8">Action</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-if="flag==0 && rowCollectionFilter.length==0">
                <td colspan="15" style="text-align: center">
                    No Data Available
                </td>
            </tr>
            <tr ng-repeat="row in emptydata">
                <td class="textalign">{{((current_page-1)*page_size)+$index+1}}</td>

                <td style="text-align: left">
                    <div class="textwrap">{{row.Doctor_Name}}</div>
                </td>
                <td style="text-align:left">{{row.WeekDayName}}</td>
                <td style="text-align:left">{{row.ShiftName}}</td>
                <!--  <td style="text-align: left">{{SundayShift2}}
                 </td>
                <td style="text-align: left">{{MondayShift2}}
                 </td>
                       <td style="text-align: left">{{TuesdayShift2}}
                 </td>
                       <td style="text-align: left">{{WednessdayShift2}}
                 </td>
                       <td style="text-align: left">{{ThursdayShift2}}
                 </td>
                       <td style="text-align: left">{{FridayShift2}}
                 </td>
                       <td style="text-align: left">{{SaturdayShift2}}
                 </td>-->

                <td style="text-align: left">
                    {{row.FromDate | date:'dd-MMM-yyyy '}}
                </td>
                <td style="text-align: left">
                    {{row.ToDate | date:'dd-MMM-yyyy '}}
                </td>
                <td style="text-align: center">
                    <a href="javascript:" ng-click="ViewDoctorShift(row.Id,row.Doctor_Id)" title="View">
                        <i class="fa fa-eye" aria-hidden="true"></i>
                    </a>
                    <a href="javascript:" title="Edit" ng-click="EditDoctorShift(row.Id, row.IsActive,row.Doctor_Id)">
                        <i class="fa fa-pencil" aria-hidden="true"></i>
                    </a>
                    <a href="javascript:;" ng-click="DeleteDoctorShift(row.Id)" title="Active">
                        <i class="fa fa-check-circle-o" aria-hidden="true" ng-if="row.IsActive==1"></i>

                        <a href="javascript:" ng-click="ReInsertDoctorShift(row.Id,row.Doctor_Id)" title="Inactive">
                            <i class="fa fa-times-circle-o" aria-hidden="true" ng-if="row.IsActive==0"></i>

                        </a>
                </td>
            </tr>
        </tbody>
        <tfoot ng-show="rowCollectionFilter.length >10">
            <tr>
                <td colspan="15" class="text-center">
                    <div st-items-by-page="10" st-page-change="rembemberCurrentPage(newPage)" st-pagination=""
                         st-template="Masters/Views/pagination.custom.html"></div>
                </td>
            </tr>
        </tfoot>
    </table>

</div>

<!--Add&Edit Modal-->
<div id="DoctorShiftModal" class="modal fade-scale" role="dialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-lg">
        <div class="model-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" title="Close"
                        ng-click="CancelPopup()">
                    &times;
                </button>
                <h4 class="modal-title">Doctor Shift</h4>
            </div>
            <div class="modal-body p-0">
                <div class="row">
                    <div class="col-sm-12">
                        <ul class="themeTabs">
                            <li>
                                <a ng-class="{'themeTabActive':currentTab=='1'}" ng-click="currentTab='1'">
                                    <i class="far fa-file"></i>Select Doctors &
                                    Date Range
                                </a>
                            </li>
                            <li>
                                <a ng-class="{'themeTabActive':currentTab=='2'}" ng-click="currentTab='2'">
                                    <i class="far fa-file-alt"></i>Set Appointments
                                    Slots
                                </a>
                            </li>
                            <li>
                                <a ng-class="{'themeTabActive':currentTab=='3'}" ng-click="currentTab='3'">
                                    <i class="fas fa-map-marker-alt"></i>Weekdays and
                                    Shift time
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div id="Div4">
                            <div>
                                <form class="form-horizontal" role="form">
                                    <div class="lds-ripple" id="chatLoaderPV" style="display: none;z-index:10000"><div></div><div></div></div>
                                    <div class="panel panel-default b-0 bs-0 m-0" ng-show="currentTab=='1'">
                                        <div class="panel-body">
                                            <div class="row">
                                                <div class="col-sm-4">
                                                    <div class="inputGroups">
                                                        <label>
                                                            Select Speciality<sup>
                                                                <font class='mandatory-field'>*</font>
                                                            </sup>
                                                        </label>
                                                        <select ng-model="SelectedDepartment" multiple="multiple" id="department" ng-change="onChangeDepartment()"
                                                                ng-options="item1.Id as item1.Department_Name for item1 in DepartmentList"
                                                                multiselect-dropdown style="width: 220px;"></select>
                                                    </div>

                                                </div>
                                                <div class="col-sm-4">
                                                    <div class="inputGroups">
                                                        <label>
                                                            Select Doctor
                                                        </label>
                                                        <select id="Specialist" ng-model="SelectedSpecialist" multiple="multiple"
                                                                ng-options="item2.Doctor_Id as item2.DoctorName for item2 in SelectedDoctorList"
                                                                multiselect-dropdown style="width: 220px;"></select>
                                                    </div>

                                                </div>
                                                <div class="col-sm-4">
                                                    <div class="inputGroups">
                                                        <label>
                                                            Select CC/CG
                                                        </label>
                                                        <select id="CCCG" ng-model="SelectedCCCG" multiple="multiple"
                                                                ng-options="item3.Id as item3.FullName for item3 in CCCG_DetailsList"
                                                                multiselect-dropdown style="width: 220px;"></select>
                                                    </div>

                                                </div>
                                                <div class="col-sm-4">
                                                    <div class="inputGroups">
                                                        <label>
                                                            Select Start Date
                                                        </label>
                                                        <input id="StartDate" class="form-control" type="date" />
                                                    </div>

                                                </div>
                                                <div class="col-sm-4">
                                                    <div class="inputGroups">
                                                        <label>
                                                            Select End Date
                                                        </label>
                                                        <input id="EndDate" class="form-control" type="date" />
                                                    </div>

                                                </div>
                                                <table cellpadding="0" cellspacing="0" border="0" width="100%"
                                                       class="formControlGroup"></table>
                                            </div>
                                        </div>
                                        <div style="text-align: center;">
                                            <button type="button" class="theme-btn-1 mr-10 mtb-15 btn-save" id="saveDoctorShift" title="Click to Save">
                                                Save
                                            </button>
                                            <button type="button" class="theme-btn-2  btn-save mtb-15" ng-click="CancelSlot()" title="Click to Cancel" id="cancelDoctorShift">
                                                Cancel
                                            </button>

                                        </div>
                                    </div>
                                    <div class="panel panel-default bs-0 b-0" ng-show="currentTab=='2'">
                                        <div id="collapse2" class="panel-collapse">
                                            <div class="panel-body">
                                                <div class="row" id="MyHomeUserList">

                                                    <!--<div class="col-sm-4">
                <div class="inputGroups">
                    <table class="table themeTable" template-pagination="custom/pager" id="MyHomeUserTable">
                        <thead>
                            <tr style="text-align: center">
                                <th width="7%">Sl No.</th>
                                <th width="60%">User</th>
                                <th width="40%">PIN</th>
                                <th width="8%">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-if="MyHomeflag==0 && (AddUserParameters | filter : {IsActive : true}).length==0">
                                <td colspan="5" style="text-align: center">
                                    No Data Available
                                </td>
                            </tr>
                            <tr class="myhomedropdown" ng-repeat="row in AddUserParameters | filter : {IsActive :  true}">
                                <td style="text-align: right;">{{$index+1}}</td>
                                <td>
                                    <select ng-model="row.UserId" class="form-control" style="width:500px;"
                                            ng-options="item1.ID as item1.FullName for item1 in UserLists" id="userlisttab">
                                        <option value="">Select</option>
                                    </select>

                                </td>
                                <td>
                                    <input type="text" class="form-control myhomedropdown"
                                           ng-model="row.PIN" maxlength="20"
                                           ng-maxlength="10" onkeypress="OnlySpecCharNum(event)" style="width:240px;" id="pintab">
                                </td>
                                <td>
                                    <input type="image" src="../../Images/deleteNewIcon.png" title='Click to Delete' class="myhomedropdown"
                                           ng-click="MyHomeDelete(row.ID,$index)" ng-model="row.SelectedUserId" style="width: 20px;" id="Image2" />-->
                                                    <!--<img src="../../Images/addNewIcon.png" ng-click="Increase();" />-->
                                                    <!--</td>
                            </tr>
                        </tbody>
                    </table>
                    <a href="javascript:" title="Click to Add" ng-show="showSave == true" style="color: #337ab7;" id="tabadduser" ng-click="MyHomeAdd()">|Add|</a>
                </div>
            </div>-->
                                                    <div class="tab-body" style=" min-height: 22rem;">
                                                        <p class="sub-title" style=" margin-left: 8px;">Appointment Slot</p>
                                                        <div style="margin-right: -63px; margin-left: -7px;">
                                                            <div class="col-sm-3">
                                                                <input type="checkbox" class="m-right-1">Use Org Default
                                                            </div>
                                                            <div class="col-sm-9">
                                                                <div class="row">
                                                                    <div class="col-sm-3">
                                                                        <p>New Appointment</p>
                                                                        <div class="input-slot">
                                                                            <input type="text" class="input-size">
                                                                            <p>Min</p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-3">
                                                                        <p>Follow-up Appointment</p>
                                                                        <div class="input-slot">
                                                                            <input type="text" class="input-size">
                                                                            <p>Min</p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-3">
                                                                        <p>Interval</p>
                                                                        <div class="input-slot">
                                                                            <input type="text" class="input-size">
                                                                            <p>Min</p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="row m-top-2">
                                                                    <div class="col-sm-3">
                                                                        <p>Custom Slot</p>
                                                                        <div class="input-slot">
                                                                            <input type="text" class="input-size">
                                                                            <p>Min</p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="mt-4">
                                                            <p class="mt-4" style="font-weight: bold; font-size: 16px; margin-left: 9px;">Booking Info</p>
                                                            <div class="row" style="margin-right: -63px; margin-left: -7px;">
                                                                <div class="col-sm-3">
                                                                    <input type="checkbox" class="m-right-1">Use Org Default
                                                                </div>
                                                                <div class="col-sm-9 row">
                                                                    <div class="col-sm-3">
                                                                        <p>Booking Open</p>
                                                                        <div class="input-slot">
                                                                            <input type="text" class="input-size">
                                                                            <p>Days</p>
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-sm-3">
                                                                        <p>Booking Cancel Lock</p>
                                                                        <div class="input-slot">
                                                                            <input type="text" class="input-size">
                                                                            <p>Hours</p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div style="text-align: center;">
                                                <button type="button" class="theme-btn-1 mr-10 mtb-15 btn-save" id="saveDoctorShift" title="Click to Save">
                                                    Save
                                                </button>
                                                <button type="button" class="theme-btn-2  btn-save mtb-15" ng-click="CancelSlot()" title="Click to Cancel" id="cancelDoctorShift">
                                                    Cancel
                                                </button>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="panel panel-default m-0 bt-0 bs-0" ng-show="currentTab=='3'">
                                        <div id="collapse3" class="panel-collapse">
                                            <div class="tab-body" style="min-height: 34rem;">
                                                <div class="col-sm-12 p-0">
                                                    <p class="sub-title" style="margin-left: 8px;">Select Week Days</p>
                                                    <div class="row col-sm-12">
                                                        <div class="col-sm-2 mr-3">
                                                            <div class="check">
                                                                <input type="checkbox" class="input-checkbox" checked="">
                                                            </div>
                                                            <p class="input-text text-center mt-2">Sunday</p>
                                                        </div>
                                                        <div class="col-sm-2 mr-3">
                                                            <div class="check">
                                                                <input type="checkbox" class="input-checkbox" checked="">
                                                            </div>
                                                            <p class="input-text text-center mt-2">Monday</p>
                                                        </div>
                                                        <div class="col-sm-2 mr-3">
                                                            <div class="check">
                                                                <input type="checkbox" class="input-checkbox" checked="">
                                                            </div>
                                                            <p class="input-text text-center mt-2">Tuesday</p>
                                                        </div>
                                                        <div class="col-sm-2 mr-3">
                                                            <div class="check">
                                                                <input type="checkbox" class="input-checkbox" checked="">
                                                            </div>
                                                            <p class="input-text text-center mt-2">Wednesday</p>
                                                        </div>
                                                        <div class="col-sm-2 mr-3">
                                                            <div class="check">
                                                                <input type="checkbox" class="input-checkbox" checked="">
                                                            </div>
                                                            <p class="input-text text-center mt-2">Thursday</p>
                                                        </div>
                                                        <div class="col-sm-2 mr-3">
                                                            <div class="check">
                                                                <input type="checkbox" class="input-checkbox" checked="">
                                                            </div>
                                                            <p class="input-text text-center mt-2">Friday</p>
                                                        </div>
                                                        <div class="col-sm-2 mr-3">
                                                            <div class="check">
                                                                <input type="checkbox" class="input-checkbox" checked="">
                                                            </div>
                                                            <p class="input-text text-center mt-2">Saturday</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-10 p-0">
                                                    <p class="sub-title mt-4" style="margin-left: 8px;">Select Time Slot</p>
                                                    <div class="flex col-sm-12 p-0" style=" margin-left: 25px;">
                                                        <div class="col-sm-3 p-0">
                                                            <p class="shift">Date / Day</p>
                                                        </div>
                                                        <div class="col-sm-3 p-0">
                                                            <p class="shift">Shift 1</p>
                                                            <div class="flex mt-1">
                                                                <input type="checkbox" class="mr-1">
                                                                <p class="ml-1">Copy to all</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 p-0">
                                                            <p class="shift">Shift 2</p>
                                                            <div class="flex mt-1">
                                                                <input type="checkbox" class="mr-1">
                                                                <p class="ml-1">Copy to all</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 p-0">
                                                            <p class="shift">Shift 3</p>
                                                            <div class="flex mt-1">
                                                                <input type="checkbox" class="mr-1">
                                                                <p class="ml-1">Copy to all</p>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-3 p-0">
                                                            <p class="add-shift"><i class="fa fa-plus mr-1" aria-hidden="true"></i>Add Shift</p>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-10 p-0 flex" style=" margin-left: 25px;">
                                                        <div class="col-sm-3 p-0 mt-2">
                                                            <p>Sunday, May 01, 2021</p>
                                                        </div>
                                                        <div class="col-sm-3 p-0 mt-2 flex">
                                                            <p class="time">8.00 AM</p>
                                                            <p class="to">to</p>
                                                            <p class="time">4.00 PM</p>
                                                        </div>
                                                        <div class="col-sm-3 p-0 mt-2 flex">
                                                            <p class="time">4.00 PM</p>
                                                            <p class="to">to</p>
                                                            <p class="time">12.00 AM</p>
                                                        </div>
                                                        <div class="col-sm-3 p-0 mt-2 flex">
                                                            <p class="time">12.00 AM</p>
                                                            <p class="to">to</p>
                                                            <p class="time">8.00 PM</p>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-10 p-0 flex" style=" margin-left: 25px;">
                                                        <div class="col-sm-3 p-0 mt-2">
                                                            <p>Monday, May 01, 2021</p>
                                                        </div>
                                                        <div class="col-sm-3 p-0 mt-2 flex">
                                                            <p class="time">8.00 AM</p>
                                                            <p class="to">to</p>
                                                            <p class="time">4.00 PM</p>
                                                        </div>
                                                        <div class="col-sm-3 p-0 mt-2 flex">
                                                            <p class="time">4.00 PM</p>
                                                            <p class="to">to</p>
                                                            <p class="time">12.00 AM</p>
                                                        </div>
                                                        <div class="col-sm-3 p-0 mt-2 flex">
                                                            <p class="time">12.00 AM</p>
                                                            <p class="to">to</p>
                                                            <p class="time">8.00 PM</p>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-10 p-0 flex" style=" margin-left: 25px;">
                                                        <div class="col-sm-3 p-0 mt-2">
                                                            <p>Tuesday, May 01, 2021</p>
                                                        </div>
                                                        <div class="col-sm-3 p-0 mt-2 flex">
                                                            <p class="time">8.00 AM</p>
                                                            <p class="to">to</p>
                                                            <p class="time">4.00 PM</p>
                                                        </div>
                                                        <div class="col-sm-3 p-0 mt-2 flex">
                                                            <p class="time">4.00 PM</p>
                                                            <p class="to">to</p>
                                                            <p class="time">12.00 AM</p>
                                                        </div>
                                                        <div class="col-sm-3 p-0 mt-2 flex">
                                                            <p class="time">12.00 AM</p>
                                                            <p class="to">to</p>
                                                            <p class="time">8.00 PM</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div style="text-align: center;">
                                                <button type="button" class="theme-btn-1 mr-10 mtb-15 btn-save" id="saveDoctorShift" title="Click to Save">
                                                    Save
                                                </button>
                                                <button type="button" class="theme-btn-2  btn-save mtb-15" ng-click="CancelSlot()" title="Click to Cancel" id="cancelDoctorShift">
                                                    Cancel
                                                </button>

                                            </div>

                                            <!--<div class="panel-body">
                                                <div class="row">
                                                    <div class="col-sm-4">
                                                        <div class="inputGroups" style="margin-left:10px;width:300px;">
                                                            <label style="margin-left:1px;">Devices</label>
                                                            <select id="tabdevice" ng-model="SelectedDevice" multiple="multiple"
                                                                    ng-options="item1.ID as item1.DeviceName for item1 in DevicesLists"
                                                                    multiselect-dropdown style="width: 220px;"></select>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>-->


                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <!--<div style="text-align: center;">
                        <button type="button" class="theme-btn-1 mr-10 mtb-15 btn-save" id="saveDoctorShift" title="Click to Save">
                            Save
                        </button>
                        <button type="button" class="theme-btn-2  btn-save mtb-15" ng-click="CancelSlot()" title="Click to Cancel" id="cancelDoctorShift">
                            Cancel
                        </button>

                    </div>-->
                </div>
            </div>
        </div>
    </div>
</div>